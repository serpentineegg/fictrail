<!--Descriptive page name, messages and instructions-->
<h2 class="heading">
    History + FicTrail
</h2>
<!--/descriptions-->

<!--subnav-->
<ul class="navigation actions" role="navigation">
    <li>
        <span class="current">FicTrail</span>
    </li>
    <li>
        <a href="/users/painless/readings">Full History</a>
    </li>
    <li>
        <a href="/users/painless/readings?show=to-read">Marked for Later</a>
    </li>
    <li>
        <a data-confirm="Are you sure you want to clear your History and Marked for Later lists? This cannot be undone!"
           rel="nofollow" data-method="post" href="/users/painless/readings/clear">Clear History</a>
    </li>
</ul>
<!--/subnav-->

<!--main content-->
<h3 class="landmark heading">
    History Items + FicTrail
</h3>

<!-- Loading State -->
<div id="fictrail-loading" class="fictrail-content-state" style="display: none;">
    <div class="loading-content">
        <div class="fictrail-spinner"></div>
        <h3>Summoning your fic history...</h3>
        <p id="fictrail-loading-status">Diving deep into your AO3 rabbit hole...</p>
    </div>
</div>

<!-- Error State -->
<div id="fictrail-error" class="fictrail-content-state" style="display: none;">
    <div class="error-content">
        <h3>Plot Twist!</h3>
        <p id="fictrail-error-message">Something went wrong...</p>
        <div class="actions">
            <a id="fictrail-retry-btn" style="cursor: pointer;" tabindex="0">Try Again (Please?)</a>
        </div>
    </div>
</div>

<!-- Search Results State -->
<div id="fictrail-results" class="fictrail-content-state" style="display: none;">
    <div id="fictrail-subtitle" class="subtitle">
        <span id="fictrail-works-count"></span>
        <span id="fictrail-fandoms-count"></span>
        <span id="fictrail-authors-count"></span>
    </div>
    <div id="fictrail-favorite-tags-summary-container"></div>

    <!-- Search and Filter Form -->
    <form class="fictrail-form">
        <fieldset class="fictrail-fieldset">
            <legend>Search and Filter</legend>
            <div class="fictrail-search-row">
                <div class="fictrail-search-field">
                    <label for="fictrail-search-input">Search</label>
                    <input type="text" id="fictrail-search-input"
                           placeholder="Search works, authors, fandoms, tags..." />
                </div>
                <div class="fictrail-filter-field">
                    <label for="fictrail-fandom-filter">Fandom</label>
                    <select id="fictrail-fandom-filter">
                        <option value="">All Fandoms</option>
                    </select>
                </div>
            </div>
        </fieldset>
    </form>

    <!-- Pages Loaded Info -->
    <form id="fictrail-pages-info" class="fictrail-form" style="display: none;">
        <fieldset class="fictrail-fieldset">
            <legend>Pages Loaded</legend>

            <div class="fictrail-pages-status">
                <p id="fictrail-pages-status-text">You have ? pages of history. Now ? page is loaded. Shall we go deeper?</p>
                <p class="note">Loading many pages can be slow. Start with fewer pages for better performance, then reload with more if needed.</p>
            </div>

            <div class="fictrail-slider-field">
                <label for="fictrail-pages-slider" class="fictrail-slider-label">Pages to load</label>
                <div class="fictrail-slider-track">
                    <span class="fictrail-slider-min">1</span>
                    <input type="range" id="fictrail-pages-slider" min="1" max="100" value="1"
                           class="fictrail-slider" aria-describedby="fictrail-pages-status-text" />
                    <span class="fictrail-slider-max">100</span>
                </div>
            </div>

            <div class="fictrail-actions actions">
                <a id="fictrail-load-btn" style="cursor: pointer;" tabindex="0">Load History</a>
            </div>
        </fieldset>
    </form>

    <!-- Results Counter -->
    <div id="fictrail-results-count" class="fictrail-results-counter"></div>

    <!-- Works List -->
    <div id="fictrail-works-container" style="display: none;">
        <ol id="fictrail-works-list" class="reading work index group"></ol>
    </div>

    <!-- Load More Container -->
    <div id="fictrail-load-more-container" class="fictrail-load-more-container" style="display: none;">
        <div id="fictrail-load-more-message"></div>
        <div class="actions">
            <a id="fictrail-load-more-button" style="cursor: pointer;" tabindex="0"></a>
        </div>
    </div>

    <!-- No Results -->
    <div id="fictrail-no-results" class="notice" style="display: none;">
        <h4>No Results Found</h4>
        <span>Your search came up empty! Try different keywords or maybe you haven't read that trope yet?</span>
    </div>
</div>
<!--/content-->